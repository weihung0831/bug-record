import{j as f,u as $,g as p,a as t,d as s,h as C,w as m,b as i,e as O,o as c,F as b,m as U,p as y,f as g,t as A,l as v}from"./app-YXWbB7n5.js";import{_ as B}from"./AuthenticatedLayout-DoGdey2Z.js";import{_ as d,a as F,b as n}from"./TextInput-DKw3n5RH.js";import{_ as N}from"./TextArea-s4EMK7pe.js";import{_}from"./Select-o9t6j9U1.js";const S={class:"flex items-center gap-4"},j={class:"py-8"},q={class:"grid grid-cols-2 gap-6"},E={class:"mt-1"},L={class:"mt-1"},T={class:"mt-2 flex flex-wrap gap-2"},z=["onClick"],D={class:"flex items-center gap-4 pt-4"},M=["disabled"],R={__name:"Edit",props:{bug:Object,priorities:Array,tags:Array,users:Array},setup(u){const r=u,x={critical:"緊急",high:"高",medium:"中",low:"低"},h=f(()=>r.priorities.map(a=>({value:a,label:x[a]||a}))),V=f(()=>[{value:"",label:"未指派"},...r.users.map(a=>({value:a.id,label:a.name}))]),e=$({title:r.bug.title,description:r.bug.description,priority:r.bug.priority,assignee_id:r.bug.assignee_id||"",tags:r.bug.tags?.map(a=>a.id)||[]}),w=()=>{e.put(route("bugs.update",r.bug.id))},k=a=>{const l=e.tags.indexOf(a);l===-1?e.tags.push(a):e.tags.splice(l,1)};return(a,l)=>(c(),p(b,null,[t(s(C),{title:"編輯問題"}),t(B,null,{header:m(()=>[i("div",S,[t(s(v),{href:a.route("bugs.show",u.bug.id),class:"text-gray-400 hover:text-gray-900"},{default:m(()=>[...l[4]||(l[4]=[g(" ← ",-1)])]),_:1},8,["href"]),l[5]||(l[5]=i("h2",{class:"text-lg font-medium text-gray-900"},"編輯問題",-1))])]),default:m(()=>[i("div",j,[i("form",{onSubmit:O(w,["prevent"]),class:"max-w-xl space-y-6"},[i("div",null,[t(d,{for:"title",value:"標題"}),t(F,{id:"title",modelValue:s(e).title,"onUpdate:modelValue":l[0]||(l[0]=o=>s(e).title=o),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(n,{message:s(e).errors.title,class:"mt-2"},null,8,["message"])]),i("div",null,[t(d,{for:"description",value:"描述"}),t(N,{id:"description",modelValue:s(e).description,"onUpdate:modelValue":l[1]||(l[1]=o=>s(e).description=o),class:"mt-1",rows:6,required:""},null,8,["modelValue"]),t(n,{message:s(e).errors.description,class:"mt-2"},null,8,["message"])]),i("div",q,[i("div",null,[t(d,{for:"priority",value:"優先級"}),i("div",E,[t(_,{modelValue:s(e).priority,"onUpdate:modelValue":l[2]||(l[2]=o=>s(e).priority=o),options:h.value,placeholder:"選擇優先級"},null,8,["modelValue","options"])]),t(n,{message:s(e).errors.priority,class:"mt-2"},null,8,["message"])]),i("div",null,[t(d,{for:"assignee",value:"負責人"}),i("div",L,[t(_,{modelValue:s(e).assignee_id,"onUpdate:modelValue":l[3]||(l[3]=o=>s(e).assignee_id=o),options:V.value,placeholder:"未指派"},null,8,["modelValue","options"])]),t(n,{message:s(e).errors.assignee_id,class:"mt-2"},null,8,["message"])])]),i("div",null,[t(d,{value:"標籤"}),i("div",T,[(c(!0),p(b,null,U(u.tags,o=>(c(),p("button",{key:o.id,type:"button",onClick:G=>k(o.id),class:"inline-flex items-center gap-1.5 rounded-full border-2 px-3 py-1 text-xs",style:y({borderColor:s(e).tags.includes(o.id)?o.color:"#e5e7eb",color:s(e).tags.includes(o.id)?o.color:"#4b5563"})},[i("span",{class:"h-2 w-2 rounded-full",style:y({backgroundColor:o.color})},null,4),g(" "+A(o.name),1)],12,z))),128))]),t(n,{message:s(e).errors.tags,class:"mt-2"},null,8,["message"])]),i("div",D,[i("button",{type:"submit",disabled:s(e).processing,class:"border border-gray-900 px-4 py-2 text-sm text-gray-900 hover:bg-gray-900 hover:text-white disabled:opacity-50"}," 儲存 ",8,M),t(s(v),{href:a.route("bugs.show",u.bug.id),class:"text-sm text-gray-500 hover:text-gray-900"},{default:m(()=>[...l[6]||(l[6]=[g(" 取消 ",-1)])]),_:1},8,["href"])])],32)])]),_:1})],64))}};export{R as default};
