import{q as f,u as B,g as c,a,d as l,h as D,w as v,b as e,i as F,o as m,F as g,m as h,p as y,t as d,e as M,n as N,y as T}from"./app-Cshwuyje.js";import{_ as q}from"./AuthenticatedLayout-CPey1Cs-.js";import{_ as k,a as z,b as E}from"./TextInput-DRabSX-B.js";import{_ as w}from"./Modal-g-iHmKPZ.js";const A={class:"py-8"},I={class:"divide-y divide-gray-100"},L={class:"flex items-center gap-3"},U={class:"text-sm text-gray-900"},G={class:"text-xs text-gray-400"},H={class:"flex items-center gap-4"},J=["onClick"],K=["onClick"],O={key:0,class:"py-16 text-center"},P={class:"text-lg font-medium text-gray-900"},Q={class:"mt-6 space-y-4"},R={class:"mt-1 border-b border-gray-200 focus-within:border-gray-900 transition-colors"},W={class:"mt-2 flex flex-wrap gap-2"},X=["onClick"],Y={class:"flex items-center gap-2"},Z={class:"text-sm"},ee={class:"mt-6 flex justify-end gap-3"},te=["disabled"],se={class:"p-6"},oe={class:"mt-2 text-sm text-gray-500"},le={class:"mt-6 flex justify-end gap-3"},de={__name:"Index",props:{tags:Array},setup(p){const n=f(!1),u=f(!1),r=f(null),x=f(null),o=B({name:"",color:"#6366f1"}),b=()=>{o.reset(),r.value=null,n.value=!0},C=i=>{o.name=i.name,o.color=i.color,r.value=i,n.value=!0},$=i=>{x.value=i,u.value=!0},S=()=>{r.value?o.put(route("tags.update",r.value.id),{onSuccess:()=>{n.value=!1,o.reset()}}):o.post(route("tags.store"),{onSuccess:()=>{n.value=!1,o.reset()}})},V=()=>{T.delete(route("tags.destroy",x.value.id),{onSuccess:()=>{u.value=!1,x.value=null}})},j=["#ef4444","#f97316","#eab308","#22c55e","#14b8a6","#3b82f6","#6366f1","#8b5cf6","#ec4899","#6b7280"];return(i,t)=>(m(),c(g,null,[a(l(D),{title:"標籤"}),a(q,null,{header:v(()=>[e("div",{class:"flex items-center justify-between"},[t[5]||(t[5]=e("h2",{class:"text-lg font-medium text-gray-900"},"標籤",-1)),e("button",{onClick:b,class:"border border-gray-900 px-3 py-1.5 text-sm text-gray-900 hover:bg-gray-900 hover:text-white"}," 新增 ")])]),default:v(()=>[e("div",A,[e("div",I,[(m(!0),c(g,null,h(p.tags,s=>(m(),c("div",{key:s.id,class:"flex items-center justify-between py-4"},[e("div",L,[e("span",{class:"inline-block h-3 w-3 rounded-full",style:y({backgroundColor:s.color})},null,4),e("span",U,d(s.name),1),e("span",G,d(s.bugs_count)+" 個問題",1)]),e("div",H,[e("button",{onClick:_=>C(s),class:"text-xs text-gray-500 hover:text-gray-900"}," 編輯 ",8,J),e("button",{onClick:_=>$(s),class:"text-xs text-gray-500 hover:text-red-600"}," 刪除 ",8,K)])]))),128))]),p.tags.length?F("",!0):(m(),c("div",O,[t[6]||(t[6]=e("p",{class:"text-sm text-gray-400"},"尚無標籤",-1)),e("button",{onClick:b,class:"mt-4 text-sm text-gray-900 hover:underline"}," 建立第一個標籤 ")]))]),a(w,{show:n.value,onClose:t[2]||(t[2]=s=>n.value=!1),"max-width":"sm"},{default:v(()=>[e("form",{onSubmit:M(S,["prevent"]),class:"p-6"},[e("h2",P,d(r.value?"編輯標籤":"新增標籤"),1),e("div",Q,[e("div",null,[a(k,{for:"name",value:"名稱"}),e("div",R,[a(z,{id:"name",modelValue:l(o).name,"onUpdate:modelValue":t[0]||(t[0]=s=>l(o).name=s),type:"text",class:"block w-full",required:"",autofocus:""},null,8,["modelValue"])]),a(E,{message:l(o).errors.name,class:"mt-2"},null,8,["message"])]),e("div",null,[a(k,{value:"顏色"}),e("div",W,[(m(),c(g,null,h(j,s=>e("button",{key:s,type:"button",onClick:_=>l(o).color=s,class:N(["h-6 w-6 rounded-full",l(o).color===s?"ring-2 ring-gray-900 ring-offset-2":""]),style:y({backgroundColor:s})},null,14,X)),64))])]),e("div",Y,[t[7]||(t[7]=e("span",{class:"text-xs text-gray-500"},"預覽：",-1)),e("span",{class:"inline-block h-3 w-3 rounded-full",style:y({backgroundColor:l(o).color})},null,4),e("span",Z,d(l(o).name||"標籤名稱"),1)])]),e("div",ee,[e("button",{type:"button",onClick:t[1]||(t[1]=s=>n.value=!1),class:"text-sm text-gray-500 hover:text-gray-900"}," 取消 "),e("button",{type:"submit",disabled:l(o).processing,class:"border border-gray-900 px-3 py-1.5 text-sm text-gray-900 hover:bg-gray-900 hover:text-white disabled:opacity-50"},d(r.value?"儲存":"建立"),9,te)])],32)]),_:1},8,["show"]),a(w,{show:u.value,onClose:t[4]||(t[4]=s=>u.value=!1),"max-width":"sm"},{default:v(()=>[e("div",se,[t[8]||(t[8]=e("h2",{class:"text-lg font-medium text-gray-900"},"刪除標籤",-1)),e("p",oe," 確定要刪除「"+d(x.value?.name)+"」嗎？ ",1),e("div",le,[e("button",{onClick:t[3]||(t[3]=s=>u.value=!1),class:"text-sm text-gray-500 hover:text-gray-900"}," 取消 "),e("button",{onClick:V,class:"border border-red-600 px-3 py-1.5 text-sm text-red-600 hover:bg-red-600 hover:text-white"}," 刪除 ")])])]),_:1},8,["show"])]),_:1})],64))}};export{de as default};
