import{j as f,u as $,g as u,a as t,d as s,h as C,w as d,b as r,e as U,o as m,F as y,m as A,p as _,f as p,t as B,l as v}from"./app-Dr59Qf_n.js";import{_ as F}from"./AuthenticatedLayout-B-vAChy3.js";import{_ as i,a as N,b as n}from"./TextInput-DKpsiScT.js";import{_ as O}from"./TextArea-DngJa0Vi.js";import{_ as x}from"./Select-CA_dcJSY.js";const S={class:"flex items-center gap-4"},q={class:"py-8"},L={class:"grid grid-cols-2 gap-6"},T={class:"mt-1"},j={class:"mt-1"},z={class:"mt-2 flex flex-wrap gap-2"},D=["onClick"],E={class:"flex items-center gap-4 pt-4"},M=["disabled"],R={__name:"Create",props:{priorities:Array,tags:Array,users:Array},setup(c){const g=c,b={critical:"緊急",high:"高",medium:"中",low:"低"},h=f(()=>g.priorities.map(a=>({value:a,label:b[a]||a}))),V=f(()=>[{value:"",label:"未指派"},...g.users.map(a=>({value:a.id,label:a.name}))]),e=$({title:"",description:"",priority:"medium",assignee_id:"",tags:[]}),w=()=>{e.post(route("bugs.store"))},k=a=>{const l=e.tags.indexOf(a);l===-1?e.tags.push(a):e.tags.splice(l,1)};return(a,l)=>(m(),u(y,null,[t(s(C),{title:"新增問題"}),t(F,null,{header:d(()=>[r("div",S,[t(s(v),{href:a.route("bugs.index"),class:"text-gray-400 hover:text-gray-900"},{default:d(()=>[...l[4]||(l[4]=[p(" ← ",-1)])]),_:1},8,["href"]),l[5]||(l[5]=r("h2",{class:"text-lg font-medium text-gray-900"},"新增問題",-1))])]),default:d(()=>[r("div",q,[r("form",{onSubmit:U(w,["prevent"]),class:"max-w-xl space-y-6"},[r("div",null,[t(i,{for:"title",value:"標題"}),t(N,{id:"title",modelValue:s(e).title,"onUpdate:modelValue":l[0]||(l[0]=o=>s(e).title=o),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),t(n,{message:s(e).errors.title,class:"mt-2"},null,8,["message"])]),r("div",null,[t(i,{for:"description",value:"描述"}),t(O,{id:"description",modelValue:s(e).description,"onUpdate:modelValue":l[1]||(l[1]=o=>s(e).description=o),class:"mt-1",rows:6,required:""},null,8,["modelValue"]),t(n,{message:s(e).errors.description,class:"mt-2"},null,8,["message"])]),r("div",L,[r("div",null,[t(i,{for:"priority",value:"優先級"}),r("div",T,[t(x,{modelValue:s(e).priority,"onUpdate:modelValue":l[2]||(l[2]=o=>s(e).priority=o),options:h.value,placeholder:"選擇優先級"},null,8,["modelValue","options"])]),t(n,{message:s(e).errors.priority,class:"mt-2"},null,8,["message"])]),r("div",null,[t(i,{for:"assignee",value:"負責人"}),r("div",j,[t(x,{modelValue:s(e).assignee_id,"onUpdate:modelValue":l[3]||(l[3]=o=>s(e).assignee_id=o),options:V.value,placeholder:"未指派"},null,8,["modelValue","options"])]),t(n,{message:s(e).errors.assignee_id,class:"mt-2"},null,8,["message"])])]),r("div",null,[t(i,{value:"標籤"}),r("div",z,[(m(!0),u(y,null,A(c.tags,o=>(m(),u("button",{key:o.id,type:"button",onClick:G=>k(o.id),class:"inline-flex items-center gap-1.5 rounded-full border-2 px-3 py-1 text-xs",style:_({borderColor:s(e).tags.includes(o.id)?o.color:"#e5e7eb",color:s(e).tags.includes(o.id)?o.color:"#4b5563"})},[r("span",{class:"h-2 w-2 rounded-full",style:_({backgroundColor:o.color})},null,4),p(" "+B(o.name),1)],12,D))),128))]),t(n,{message:s(e).errors.tags,class:"mt-2"},null,8,["message"])]),r("div",E,[r("button",{type:"submit",disabled:s(e).processing,class:"border border-gray-900 px-4 py-2 text-sm text-gray-900 hover:bg-gray-900 hover:text-white disabled:opacity-50"}," 建立 ",8,M),t(s(v),{href:a.route("bugs.index"),class:"text-sm text-gray-500 hover:text-gray-900"},{default:d(()=>[...l[6]||(l[6]=[p(" 取消 ",-1)])]),_:1},8,["href"])])],32)])]),_:1})],64))}};export{R as default};
