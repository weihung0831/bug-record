import{g as o,a as l,d as m,h as b,w as x,b as t,t as a,l as y,f as c,i as g,o as i,F as u,m as h,c as f,p as w}from"./app-YXWbB7n5.js";import{_ as k}from"./AuthenticatedLayout-DoGdey2Z.js";import{_ as B,a as A}from"./PriorityBadge-C3f4Nnmq.js";const C={class:"py-8"},D={class:"grid grid-cols-5 gap-px border border-gray-100 bg-gray-100"},L={class:"bg-white p-6"},$={class:"mt-1 text-2xl font-medium text-gray-900"},j={class:"bg-white p-6"},N={class:"mt-1 text-2xl font-medium text-gray-900"},V={class:"bg-white p-6"},O={class:"mt-1 text-2xl font-medium text-gray-900"},S={class:"bg-white p-6"},z={class:"mt-1 text-2xl font-medium text-gray-900"},F={class:"bg-white p-6"},T={class:"mt-1 text-2xl font-medium text-gray-900"},E={class:"mt-12 grid gap-12 lg:grid-cols-2"},M={class:"flex items-center justify-between"},P={class:"mt-4 divide-y divide-gray-100"},W={class:"flex items-center gap-3"},q={class:"flex items-center gap-2"},G={class:"mt-2 text-sm text-gray-900"},H={class:"mt-1 text-xs text-gray-500"},I={key:0},J={key:0,class:"py-8 text-center text-sm text-gray-400"},K={class:"mt-4 divide-y divide-gray-100"},Q={class:"text-sm"},R={class:"font-medium text-blue-600"},U={class:"mt-0.5 text-gray-600"},X={class:"mt-1 text-xs text-gray-400"},Y={key:0,class:"py-8 text-center text-sm text-gray-400"},Z={class:"mt-12"},at={__name:"Dashboard",props:{stats:Object,statusCounts:Object,priorityCounts:Object,dailyBugs:Array,assigneeCounts:Array,recentBugs:Array,recentActivities:Array},setup(n){const _=r=>new Date(r).toLocaleDateString("zh-TW",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),v=r=>{const e={created:"建立了問題",status_changed:"將狀態改為",priority_changed:"將優先級改為",assigned:"指派了問題",commented:"新增了留言",attachment_added:"新增了附件"},s={open:"開放",in_progress:"進行中",resolved:"已解決",closed:"已關閉",low:"低",medium:"中",high:"高",critical:"緊急"},d=e[r.type]||r.type;if(r.new_value){const p=s[r.new_value]||r.new_value;return`${d} ${p}`}return d};return(r,e)=>(i(),o(u,null,[l(m(b),{title:"儀表板"}),l(k,null,{header:x(()=>[...e[0]||(e[0]=[t("h2",{class:"text-lg font-medium text-gray-900"},"儀表板",-1)])]),default:x(()=>[t("div",C,[t("div",D,[t("div",L,[e[1]||(e[1]=t("div",{class:"text-xs text-gray-500"},"總問題數",-1)),t("div",$,a(n.stats.total),1)]),t("div",j,[e[2]||(e[2]=t("div",{class:"text-xs text-gray-500"},"開放",-1)),t("div",N,a(n.stats.open),1)]),t("div",V,[e[3]||(e[3]=t("div",{class:"text-xs text-gray-500"},"進行中",-1)),t("div",O,a(n.stats.inProgress),1)]),t("div",S,[e[4]||(e[4]=t("div",{class:"text-xs text-gray-500"},"已解決",-1)),t("div",z,a(n.stats.resolved),1)]),t("div",F,[e[5]||(e[5]=t("div",{class:"text-xs text-gray-500"},"已關閉",-1)),t("div",T,a(n.stats.closed),1)])]),t("div",E,[t("div",null,[t("div",M,[e[7]||(e[7]=t("h3",{class:"text-sm font-medium text-gray-900"},"最近問題",-1)),l(m(y),{href:r.route("bugs.index"),class:"text-xs text-gray-500 hover:text-gray-900"},{default:x(()=>[...e[6]||(e[6]=[c(" 查看全部 ",-1)])]),_:1},8,["href"])]),t("div",P,[(i(!0),o(u,null,h(n.recentBugs,s=>(i(),f(m(y),{key:s.id,href:r.route("bugs.show",s.id),class:"block py-4"},{default:x(()=>[t("div",W,[l(B,{status:s.status},null,8,["status"]),e[9]||(e[9]=t("span",{class:"text-gray-300"},"·",-1)),l(A,{priority:s.priority},null,8,["priority"]),s.tags?.length?(i(),o(u,{key:0},[e[8]||(e[8]=t("span",{class:"text-gray-300"},"·",-1)),t("div",q,[(i(!0),o(u,null,h(s.tags,d=>(i(),o("span",{key:d.id,class:"inline-flex items-center gap-1 text-xs text-gray-600"},[t("span",{class:"h-2 w-2 rounded-full",style:w({backgroundColor:d.color})},null,4),c(" "+a(d.name),1)]))),128))])],64)):g("",!0)]),t("div",G,a(s.title),1),t("div",H,[c(a(s.reporter?.name)+" ",1),s.assignee?(i(),o("span",I," → "+a(s.assignee.name),1)):g("",!0)])]),_:2},1032,["href"]))),128)),n.recentBugs?.length?g("",!0):(i(),o("p",J," 尚無問題 "))])]),t("div",null,[e[10]||(e[10]=t("h3",{class:"text-sm font-medium text-gray-900"},"最近活動",-1)),t("div",K,[(i(!0),o(u,null,h(n.recentActivities,s=>(i(),o("div",{key:s.id,class:"py-4"},[t("div",Q,[t("span",R,a(s.user?.name),1),t("p",U,a(v(s)),1)]),s.bug?(i(),f(m(y),{key:0,href:r.route("bugs.show",s.bug.id),class:"mt-1 block text-xs text-gray-500 hover:text-gray-900"},{default:x(()=>[c(a(s.bug.title),1)]),_:2},1032,["href"])):g("",!0),t("p",X,a(_(s.created_at)),1)]))),128)),n.recentActivities?.length?g("",!0):(i(),o("p",Y," 尚無活動 "))])])]),t("div",Z,[l(m(y),{href:r.route("bugs.create"),class:"inline-flex items-center border border-gray-900 px-4 py-2 text-sm text-gray-900 hover:bg-gray-900 hover:text-white"},{default:x(()=>[...e[11]||(e[11]=[c(" 回報新問題 ",-1)])]),_:1},8,["href"])])])]),_:1})],64))}};export{at as default};
