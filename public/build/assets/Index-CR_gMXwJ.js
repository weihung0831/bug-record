import{j as g,q as C,s as F,g as o,a as i,d as p,h as M,w as c,b as t,i as m,k as A,x as B,o as l,F as n,m as f,c as k,l as v,f as h,p as H,t as y,n as N,y as S}from"./app-YXWbB7n5.js";import{_ as U}from"./AuthenticatedLayout-DoGdey2Z.js";import{_ as $,a as z}from"./PriorityBadge-C3f4Nnmq.js";import{_ as b}from"./Select-o9t6j9U1.js";const D={class:"flex items-center justify-between"},q={class:"py-8"},E={class:"flex flex-wrap items-center gap-4 border-b border-gray-100 pb-6"},I={class:"w-32"},G={class:"w-32"},J={class:"w-32"},K={class:"divide-y divide-gray-100"},P={class:"flex items-start justify-between"},Q={class:"flex items-center gap-3"},R={class:"flex items-center gap-2"},W={class:"mt-2 text-sm font-medium text-gray-900"},X={class:"mt-1 line-clamp-1 text-sm text-gray-500"},Y={class:"text-right text-xs text-gray-500"},Z={key:0,class:"mt-1"},ee={key:0,class:"py-16 text-center"},te={key:0,class:"mt-8 flex justify-center gap-1"},se=["innerHTML"],ie={__name:"Index",props:{bugs:Object,filters:Object,statuses:Array,priorities:Array,tags:Array,users:Array},setup(u){const x=u,w={open:"開放",in_progress:"進行中",resolved:"已解決",closed:"已關閉"},V={critical:"緊急",high:"高",medium:"中",low:"低"},j=g(()=>[{value:"",label:"所有狀態"},...x.statuses.map(a=>({value:a,label:w[a]||a}))]),L=g(()=>[{value:"",label:"所有優先級"},...x.priorities.map(a=>({value:a,label:V[a]||a}))]),O=g(()=>[{value:"",label:"所有標籤"},...(x.tags||[]).map(a=>({value:a.slug,label:a.name}))]),r=C({...x.filters}),_=()=>{S.get(route("bugs.index"),r.value,{preserveState:!0,preserveScroll:!0})},T=()=>{r.value={},_()};return F(r,_,{deep:!0}),(a,s)=>(l(),o(n,null,[i(p(M),{title:"問題"}),i(U,null,{header:c(()=>[t("div",D,[s[5]||(s[5]=t("h2",{class:"text-lg font-medium text-gray-900"},"問題",-1)),i(p(v),{href:a.route("bugs.create"),class:"border border-gray-900 px-3 py-1.5 text-sm text-gray-900 hover:bg-gray-900 hover:text-white"},{default:c(()=>[...s[4]||(s[4]=[h(" 新增 ",-1)])]),_:1},8,["href"])])]),default:c(()=>[t("div",q,[t("div",E,[A(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>r.value.search=e),type:"text",placeholder:"搜尋...",class:"w-48 border-0 bg-transparent px-0 py-2 text-sm focus:outline-none focus:ring-0"},null,512),[[B,r.value.search]]),t("div",I,[i(b,{modelValue:r.value.status,"onUpdate:modelValue":s[1]||(s[1]=e=>r.value.status=e),options:j.value,placeholder:"所有狀態"},null,8,["modelValue","options"])]),t("div",G,[i(b,{modelValue:r.value.priority,"onUpdate:modelValue":s[2]||(s[2]=e=>r.value.priority=e),options:L.value,placeholder:"所有優先級"},null,8,["modelValue","options"])]),t("div",J,[i(b,{modelValue:r.value.tag,"onUpdate:modelValue":s[3]||(s[3]=e=>r.value.tag=e),options:O.value,placeholder:"所有標籤"},null,8,["modelValue","options"])]),Object.values(r.value).some(e=>e)?(l(),o("button",{key:0,onClick:T,class:"text-xs text-gray-500 hover:text-gray-900"}," 清除 ")):m("",!0)]),t("div",K,[(l(!0),o(n,null,f(u.bugs.data,e=>(l(),k(p(v),{key:e.id,href:a.route("bugs.show",e.id),class:"block py-6"},{default:c(()=>[t("div",P,[t("div",null,[t("div",Q,[i($,{status:e.status},null,8,["status"]),s[7]||(s[7]=t("span",{class:"text-gray-300"},"·",-1)),i(z,{priority:e.priority},null,8,["priority"]),e.tags?.length?(l(),o(n,{key:0},[s[6]||(s[6]=t("span",{class:"text-gray-300"},"·",-1)),t("div",R,[(l(!0),o(n,null,f(e.tags,d=>(l(),o("span",{key:d.id,class:"inline-flex items-center gap-1 text-xs text-gray-600"},[t("span",{class:"h-2 w-2 rounded-full",style:H({backgroundColor:d.color})},null,4),h(" "+y(d.name),1)]))),128))])],64)):m("",!0)]),t("h3",W,y(e.title),1),t("p",X,y(e.description),1)]),t("div",Y,[t("div",null,y(e.reporter?.name),1),e.assignee?(l(),o("div",Z,"→ "+y(e.assignee.name),1)):m("",!0)])])]),_:2},1032,["href"]))),128)),u.bugs.data.length===0?(l(),o("div",ee,[s[9]||(s[9]=t("p",{class:"text-sm text-gray-400"},"找不到問題",-1)),i(p(v),{href:a.route("bugs.create"),class:"mt-4 inline-block text-sm text-gray-900 hover:underline"},{default:c(()=>[...s[8]||(s[8]=[h(" 建立第一個問題 ",-1)])]),_:1},8,["href"])])):m("",!0)]),u.bugs.links.length>3?(l(),o("div",te,[(l(!0),o(n,null,f(u.bugs.links,(e,d)=>(l(),o(n,{key:d},[e.url?(l(),k(p(v),{key:0,href:e.url,class:N(["px-3 py-1 text-sm",e.active?"text-gray-900":"text-gray-400 hover:text-gray-900"]),innerHTML:e.label},null,8,["href","class","innerHTML"])):(l(),o("span",{key:1,class:"px-3 py-1 text-sm text-gray-300",innerHTML:e.label},null,8,se))],64))),128))])):m("",!0)])]),_:1})],64))}};export{ie as default};
