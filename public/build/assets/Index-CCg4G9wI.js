import{q as f,u as B,g as c,a,d as o,h as D,w as v,b as e,i as F,o as m,F as y,m as h,p,t as d,e as M,n as N,y as T}from"./app-Dr59Qf_n.js";import{_ as q}from"./AuthenticatedLayout-B-vAChy3.js";import{_ as k,a as z,b as E}from"./TextInput-DKpsiScT.js";import{_ as C}from"./Modal-CCZj0cHL.js";const A={class:"py-8"},I={class:"divide-y divide-gray-100"},L={class:"flex items-center gap-3"},U={class:"text-sm text-gray-900"},G={class:"text-xs text-gray-400"},H={class:"flex items-center gap-4"},J=["onClick"],K=["onClick"],O={key:0,class:"py-16 text-center"},P={class:"text-lg font-medium text-gray-900"},Q={class:"mt-6 space-y-4"},R={class:"mt-2 flex flex-wrap gap-2"},W=["onClick"],X={class:"flex items-center gap-2"},Y={class:"text-sm"},Z={class:"mt-6 flex justify-end gap-3"},ee=["disabled"],te={class:"p-6"},se={class:"mt-2 text-sm text-gray-500"},le={class:"mt-6 flex justify-end gap-3"},ie={__name:"Index",props:{tags:Array},setup(_){const n=f(!1),u=f(!1),r=f(null),x=f(null),l=B({name:"",color:"#6366f1"}),b=()=>{l.reset(),r.value=null,n.value=!0},w=i=>{l.name=i.name,l.color=i.color,r.value=i,n.value=!0},$=i=>{x.value=i,u.value=!0},S=()=>{r.value?l.put(route("tags.update",r.value.id),{onSuccess:()=>{n.value=!1,l.reset()}}):l.post(route("tags.store"),{onSuccess:()=>{n.value=!1,l.reset()}})},V=()=>{T.delete(route("tags.destroy",x.value.id),{onSuccess:()=>{u.value=!1,x.value=null}})},j=["#ef4444","#f97316","#eab308","#22c55e","#14b8a6","#3b82f6","#6366f1","#8b5cf6","#ec4899","#6b7280"];return(i,s)=>(m(),c(y,null,[a(o(D),{title:"標籤"}),a(q,null,{header:v(()=>[e("div",{class:"flex items-center justify-between"},[s[5]||(s[5]=e("h2",{class:"text-lg font-medium text-gray-900"},"標籤",-1)),e("button",{onClick:b,class:"border border-gray-900 px-3 py-1.5 text-sm text-gray-900 hover:bg-gray-900 hover:text-white"}," 新增 ")])]),default:v(()=>[e("div",A,[e("div",I,[(m(!0),c(y,null,h(_.tags,t=>(m(),c("div",{key:t.id,class:"flex items-center justify-between py-4"},[e("div",L,[e("span",{class:"inline-block h-3 w-3 rounded-full",style:p({backgroundColor:t.color})},null,4),e("span",U,d(t.name),1),e("span",G,d(t.bugs_count)+" 個問題",1)]),e("div",H,[e("button",{onClick:g=>w(t),class:"text-xs text-gray-500 hover:text-gray-900"}," 編輯 ",8,J),e("button",{onClick:g=>$(t),class:"text-xs text-gray-500 hover:text-red-600"}," 刪除 ",8,K)])]))),128))]),_.tags.length?F("",!0):(m(),c("div",O,[s[6]||(s[6]=e("p",{class:"text-sm text-gray-400"},"尚無標籤",-1)),e("button",{onClick:b,class:"mt-4 text-sm text-gray-900 hover:underline"}," 建立第一個標籤 ")]))]),a(C,{show:n.value,onClose:s[2]||(s[2]=t=>n.value=!1),"max-width":"sm"},{default:v(()=>[e("form",{onSubmit:M(S,["prevent"]),class:"p-6"},[e("h2",P,d(r.value?"編輯標籤":"新增標籤"),1),e("div",Q,[e("div",null,[a(k,{for:"name",value:"名稱"}),a(z,{id:"name",modelValue:o(l).name,"onUpdate:modelValue":s[0]||(s[0]=t=>o(l).name=t),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),a(E,{message:o(l).errors.name,class:"mt-2"},null,8,["message"])]),e("div",null,[a(k,{value:"顏色"}),e("div",R,[(m(),c(y,null,h(j,t=>e("button",{key:t,type:"button",onClick:g=>o(l).color=t,class:N(["h-6 w-6 rounded-full",o(l).color===t?"ring-2 ring-gray-900 ring-offset-2":""]),style:p({backgroundColor:t})},null,14,W)),64))])]),e("div",X,[s[7]||(s[7]=e("span",{class:"text-xs text-gray-500"},"預覽：",-1)),e("span",{class:"inline-block h-3 w-3 rounded-full",style:p({backgroundColor:o(l).color})},null,4),e("span",Y,d(o(l).name||"標籤名稱"),1)])]),e("div",Z,[e("button",{type:"button",onClick:s[1]||(s[1]=t=>n.value=!1),class:"text-sm text-gray-500 hover:text-gray-900"}," 取消 "),e("button",{type:"submit",disabled:o(l).processing,class:"border border-gray-900 px-3 py-1.5 text-sm text-gray-900 hover:bg-gray-900 hover:text-white disabled:opacity-50"},d(r.value?"儲存":"建立"),9,ee)])],32)]),_:1},8,["show"]),a(C,{show:u.value,onClose:s[4]||(s[4]=t=>u.value=!1),"max-width":"sm"},{default:v(()=>{var t;return[e("div",te,[s[8]||(s[8]=e("h2",{class:"text-lg font-medium text-gray-900"},"刪除標籤",-1)),e("p",se," 確定要刪除「"+d((t=x.value)==null?void 0:t.name)+"」嗎？ ",1),e("div",le,[e("button",{onClick:s[3]||(s[3]=g=>u.value=!1),class:"text-sm text-gray-500 hover:text-gray-900"}," 取消 "),e("button",{onClick:V,class:"border border-red-600 px-3 py-1.5 text-sm text-red-600 hover:bg-red-600 hover:text-white"}," 刪除 ")])])]}),_:1},8,["show"])]),_:1})],64))}};export{ie as default};
