import{g as n,a as d,d as x,h as B,w as l,b as t,t as a,l as y,f as m,i as c,o as r,F as u,m as f,c as b,p as A}from"./app-Dr59Qf_n.js";import{_ as C}from"./AuthenticatedLayout-B-vAChy3.js";import{_ as D,a as $}from"./PriorityBadge-BDmruV6K.js";const j={class:"py-8"},N={class:"grid grid-cols-4 gap-px border border-gray-100 bg-gray-100"},V={class:"bg-white p-6"},O={class:"mt-1 text-2xl font-medium text-gray-900"},S={class:"bg-white p-6"},z={class:"mt-1 text-2xl font-medium text-gray-900"},F={class:"bg-white p-6"},L={class:"mt-1 text-2xl font-medium text-gray-900"},T={class:"bg-white p-6"},E={class:"mt-1 text-2xl font-medium text-gray-900"},M={class:"mt-12 grid gap-12 lg:grid-cols-2"},P={class:"flex items-center justify-between"},W={class:"mt-4 divide-y divide-gray-100"},q={class:"flex items-center gap-3"},G={class:"flex items-center gap-2"},H={class:"mt-2 text-sm text-gray-900"},I={class:"mt-1 text-xs text-gray-500"},J={key:0},K={key:0,class:"py-8 text-center text-sm text-gray-400"},Q={class:"mt-4 divide-y divide-gray-100"},R={class:"text-sm text-gray-900"},U={class:"font-medium"},X={class:"text-gray-500"},Y={class:"mt-1 text-xs text-gray-400"},Z={key:0,class:"py-8 text-center text-sm text-gray-400"},tt={class:"mt-12"},rt={__name:"Dashboard",props:{stats:Object,statusCounts:Object,priorityCounts:Object,dailyBugs:Array,assigneeCounts:Array,recentBugs:Array,recentActivities:Array},setup(o){const k=i=>new Date(i).toLocaleDateString("zh-TW",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=i=>({created:"建立了問題",status_changed:`將狀態改為 ${i.new_value}`,priority_changed:`將優先級改為 ${i.new_value}`,assigned:"指派了問題",commented:"新增了留言",attachment_added:"新增了附件"})[i.type]||i.type.replace("_"," ");return(i,e)=>(r(),n(u,null,[d(x(B),{title:"儀表板"}),d(C,null,{header:l(()=>[...e[0]||(e[0]=[t("h2",{class:"text-lg font-medium text-gray-900"},"儀表板",-1)])]),default:l(()=>{var _,p;return[t("div",j,[t("div",N,[t("div",V,[e[1]||(e[1]=t("div",{class:"text-xs text-gray-500"},"總問題數",-1)),t("div",O,a(o.stats.total),1)]),t("div",S,[e[2]||(e[2]=t("div",{class:"text-xs text-gray-500"},"開放",-1)),t("div",z,a(o.stats.open),1)]),t("div",F,[e[3]||(e[3]=t("div",{class:"text-xs text-gray-500"},"進行中",-1)),t("div",L,a(o.stats.inProgress),1)]),t("div",T,[e[4]||(e[4]=t("div",{class:"text-xs text-gray-500"},"已解決",-1)),t("div",E,a(o.stats.resolved),1)])]),t("div",M,[t("div",null,[t("div",P,[e[6]||(e[6]=t("h3",{class:"text-sm font-medium text-gray-900"},"最近問題",-1)),d(x(y),{href:i.route("bugs.index"),class:"text-xs text-gray-500 hover:text-gray-900"},{default:l(()=>[...e[5]||(e[5]=[m(" 查看全部 ",-1)])]),_:1},8,["href"])]),t("div",W,[(r(!0),n(u,null,f(o.recentBugs,s=>(r(),b(x(y),{key:s.id,href:i.route("bugs.show",s.id),class:"block py-4"},{default:l(()=>{var g,v;return[t("div",q,[d(D,{status:s.status},null,8,["status"]),e[8]||(e[8]=t("span",{class:"text-gray-300"},"·",-1)),d($,{priority:s.priority},null,8,["priority"]),(g=s.tags)!=null&&g.length?(r(),n(u,{key:0},[e[7]||(e[7]=t("span",{class:"text-gray-300"},"·",-1)),t("div",G,[(r(!0),n(u,null,f(s.tags,h=>(r(),n("span",{key:h.id,class:"inline-flex items-center gap-1 text-xs text-gray-600"},[t("span",{class:"h-2 w-2 rounded-full",style:A({backgroundColor:h.color})},null,4),m(" "+a(h.name),1)]))),128))])],64)):c("",!0)]),t("div",H,a(s.title),1),t("div",I,[m(a((v=s.reporter)==null?void 0:v.name)+" ",1),s.assignee?(r(),n("span",J," → "+a(s.assignee.name),1)):c("",!0)])]}),_:2},1032,["href"]))),128)),(_=o.recentBugs)!=null&&_.length?c("",!0):(r(),n("p",K," 尚無問題 "))])]),t("div",null,[e[9]||(e[9]=t("h3",{class:"text-sm font-medium text-gray-900"},"最近活動",-1)),t("div",Q,[(r(!0),n(u,null,f(o.recentActivities,s=>{var g;return r(),n("div",{key:s.id,class:"py-4"},[t("p",R,[t("span",U,a((g=s.user)==null?void 0:g.name),1),t("span",X,a(w(s)),1)]),s.bug?(r(),b(x(y),{key:0,href:i.route("bugs.show",s.bug.id),class:"mt-1 block text-xs text-gray-500 hover:text-gray-900"},{default:l(()=>[m(a(s.bug.title),1)]),_:2},1032,["href"])):c("",!0),t("p",Y,a(k(s.created_at)),1)])}),128)),(p=o.recentActivities)!=null&&p.length?c("",!0):(r(),n("p",Z," 尚無活動 "))])])]),t("div",tt,[d(x(y),{href:i.route("bugs.create"),class:"inline-flex items-center border border-gray-900 px-4 py-2 text-sm text-gray-900 hover:bg-gray-900 hover:text-white"},{default:l(()=>[...e[10]||(e[10]=[m(" 回報新問題 ",-1)])]),_:1},8,["href"])])])]}),_:1})],64))}};export{rt as default};
