import{j as b,u as C,g as p,a as t,d as s,h as O,w as m,b as i,e as U,o as c,F as y,m as A,p as v,f as g,t as B,l as _}from"./app-Dr59Qf_n.js";import{_ as F}from"./AuthenticatedLayout-B-vAChy3.js";import{_ as d,a as N,b as n}from"./TextInput-DKpsiScT.js";import{_ as S}from"./TextArea-DngJa0Vi.js";import{_ as x}from"./Select-CA_dcJSY.js";const j={class:"flex items-center gap-4"},q={class:"py-8"},E={class:"grid grid-cols-2 gap-6"},L={class:"mt-1"},T={class:"mt-1"},z={class:"mt-2 flex flex-wrap gap-2"},D=["onClick"],M={class:"flex items-center gap-4 pt-4"},G=["disabled"],W={__name:"Edit",props:{bug:Object,priorities:Array,tags:Array,users:Array},setup(u){var f;const r=u,h={critical:"緊急",high:"高",medium:"中",low:"低"},V=b(()=>r.priorities.map(a=>({value:a,label:h[a]||a}))),w=b(()=>[{value:"",label:"未指派"},...r.users.map(a=>({value:a.id,label:a.name}))]),e=C({title:r.bug.title,description:r.bug.description,priority:r.bug.priority,assignee_id:r.bug.assignee_id||"",tags:((f=r.bug.tags)==null?void 0:f.map(a=>a.id))||[]}),k=()=>{e.put(route("bugs.update",r.bug.id))},$=a=>{const l=e.tags.indexOf(a);l===-1?e.tags.push(a):e.tags.splice(l,1)};return(a,l)=>(c(),p(y,null,[t(s(O),{title:"編輯問題"}),t(F,null,{header:m(()=>[i("div",j,[t(s(_),{href:a.route("bugs.show",u.bug.id),class:"text-gray-400 hover:text-gray-900"},{default:m(()=>[...l[4]||(l[4]=[g(" ← ",-1)])]),_:1},8,["href"]),l[5]||(l[5]=i("h2",{class:"text-lg font-medium text-gray-900"},"編輯問題",-1))])]),default:m(()=>[i("div",q,[i("form",{onSubmit:U(k,["prevent"]),class:"max-w-xl space-y-6"},[i("div",null,[t(d,{for:"title",value:"標題"}),t(N,{id:"title",modelValue:s(e).title,"onUpdate:modelValue":l[0]||(l[0]=o=>s(e).title=o),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(n,{message:s(e).errors.title,class:"mt-2"},null,8,["message"])]),i("div",null,[t(d,{for:"description",value:"描述"}),t(S,{id:"description",modelValue:s(e).description,"onUpdate:modelValue":l[1]||(l[1]=o=>s(e).description=o),class:"mt-1",rows:6,required:""},null,8,["modelValue"]),t(n,{message:s(e).errors.description,class:"mt-2"},null,8,["message"])]),i("div",E,[i("div",null,[t(d,{for:"priority",value:"優先級"}),i("div",L,[t(x,{modelValue:s(e).priority,"onUpdate:modelValue":l[2]||(l[2]=o=>s(e).priority=o),options:V.value,placeholder:"選擇優先級"},null,8,["modelValue","options"])]),t(n,{message:s(e).errors.priority,class:"mt-2"},null,8,["message"])]),i("div",null,[t(d,{for:"assignee",value:"負責人"}),i("div",T,[t(x,{modelValue:s(e).assignee_id,"onUpdate:modelValue":l[3]||(l[3]=o=>s(e).assignee_id=o),options:w.value,placeholder:"未指派"},null,8,["modelValue","options"])]),t(n,{message:s(e).errors.assignee_id,class:"mt-2"},null,8,["message"])])]),i("div",null,[t(d,{value:"標籤"}),i("div",z,[(c(!0),p(y,null,A(u.tags,o=>(c(),p("button",{key:o.id,type:"button",onClick:H=>$(o.id),class:"inline-flex items-center gap-1.5 rounded-full border-2 px-3 py-1 text-xs",style:v({borderColor:s(e).tags.includes(o.id)?o.color:"#e5e7eb",color:s(e).tags.includes(o.id)?o.color:"#4b5563"})},[i("span",{class:"h-2 w-2 rounded-full",style:v({backgroundColor:o.color})},null,4),g(" "+B(o.name),1)],12,D))),128))]),t(n,{message:s(e).errors.tags,class:"mt-2"},null,8,["message"])]),i("div",M,[i("button",{type:"submit",disabled:s(e).processing,class:"border border-gray-900 px-4 py-2 text-sm text-gray-900 hover:bg-gray-900 hover:text-white disabled:opacity-50"}," 儲存 ",8,G),t(s(_),{href:a.route("bugs.show",u.bug.id),class:"text-sm text-gray-500 hover:text-gray-900"},{default:m(()=>[...l[6]||(l[6]=[g(" 取消 ",-1)])]),_:1},8,["href"])])],32)])]),_:1})],64))}};export{W as default};
