import{j as f,q as M,s as A,g as o,a as i,d,h as B,w as p,b as t,i as c,k as H,x as N,o as l,F as n,m as h,c as V,l as v,f as b,p as S,t as m,n as U,y as $}from"./app-Dr59Qf_n.js";import{_ as z}from"./AuthenticatedLayout-B-vAChy3.js";import{_ as D,a as q}from"./PriorityBadge-BDmruV6K.js";import{_}from"./Select-CA_dcJSY.js";const E={class:"flex items-center justify-between"},I={class:"py-8"},G={class:"flex flex-wrap items-center gap-4 border-b border-gray-100 pb-6"},J={class:"w-32"},K={class:"w-32"},P={class:"w-32"},Q={class:"divide-y divide-gray-100"},R={class:"flex items-start justify-between"},W={class:"flex items-center gap-3"},X={class:"flex items-center gap-2"},Y={class:"mt-2 text-sm font-medium text-gray-900"},Z={class:"mt-1 line-clamp-1 text-sm text-gray-500"},ee={class:"text-right text-xs text-gray-500"},te={key:0,class:"mt-1"},se={key:0,class:"py-16 text-center"},ae={key:0,class:"mt-8 flex justify-center gap-1"},le=["innerHTML"],ue={__name:"Index",props:{bugs:Object,filters:Object,statuses:Array,priorities:Array,tags:Array,users:Array},setup(u){const y=u,j={open:"開放",in_progress:"進行中",resolved:"已解決",closed:"已關閉"},L={critical:"緊急",high:"高",medium:"中",low:"低"},O=f(()=>[{value:"",label:"所有狀態"},...y.statuses.map(a=>({value:a,label:j[a]||a}))]),T=f(()=>[{value:"",label:"所有優先級"},...y.priorities.map(a=>({value:a,label:L[a]||a}))]),C=f(()=>[{value:"",label:"所有標籤"},...(y.tags||[]).map(a=>({value:a.id,label:a.name}))]),r=M({...y.filters}),k=()=>{$.get(route("bugs.index"),r.value,{preserveState:!0,preserveScroll:!0})},F=()=>{r.value={},k()};return A(r,k,{deep:!0}),(a,s)=>(l(),o(n,null,[i(d(B),{title:"問題"}),i(z,null,{header:p(()=>[t("div",E,[s[5]||(s[5]=t("h2",{class:"text-lg font-medium text-gray-900"},"問題",-1)),i(d(v),{href:a.route("bugs.create"),class:"border border-gray-900 px-3 py-1.5 text-sm text-gray-900 hover:bg-gray-900 hover:text-white"},{default:p(()=>[...s[4]||(s[4]=[b(" 新增 ",-1)])]),_:1},8,["href"])])]),default:p(()=>[t("div",I,[t("div",G,[H(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>r.value.search=e),type:"text",placeholder:"搜尋...",class:"w-48 border-0 bg-transparent px-0 py-2 text-sm focus:outline-none focus:ring-0"},null,512),[[N,r.value.search]]),t("div",J,[i(_,{modelValue:r.value.status,"onUpdate:modelValue":s[1]||(s[1]=e=>r.value.status=e),options:O.value,placeholder:"所有狀態"},null,8,["modelValue","options"])]),t("div",K,[i(_,{modelValue:r.value.priority,"onUpdate:modelValue":s[2]||(s[2]=e=>r.value.priority=e),options:T.value,placeholder:"所有優先級"},null,8,["modelValue","options"])]),t("div",P,[i(_,{modelValue:r.value.tag,"onUpdate:modelValue":s[3]||(s[3]=e=>r.value.tag=e),options:C.value,placeholder:"所有標籤"},null,8,["modelValue","options"])]),Object.values(r.value).some(e=>e)?(l(),o("button",{key:0,onClick:F,class:"text-xs text-gray-500 hover:text-gray-900"}," 清除 ")):c("",!0)]),t("div",Q,[(l(!0),o(n,null,h(u.bugs.data,e=>(l(),V(d(v),{key:e.id,href:a.route("bugs.show",e.id),class:"block py-6"},{default:p(()=>{var x,w;return[t("div",R,[t("div",null,[t("div",W,[i(D,{status:e.status},null,8,["status"]),s[7]||(s[7]=t("span",{class:"text-gray-300"},"·",-1)),i(q,{priority:e.priority},null,8,["priority"]),(x=e.tags)!=null&&x.length?(l(),o(n,{key:0},[s[6]||(s[6]=t("span",{class:"text-gray-300"},"·",-1)),t("div",X,[(l(!0),o(n,null,h(e.tags,g=>(l(),o("span",{key:g.id,class:"inline-flex items-center gap-1 text-xs text-gray-600"},[t("span",{class:"h-2 w-2 rounded-full",style:S({backgroundColor:g.color})},null,4),b(" "+m(g.name),1)]))),128))])],64)):c("",!0)]),t("h3",Y,m(e.title),1),t("p",Z,m(e.description),1)]),t("div",ee,[t("div",null,m((w=e.reporter)==null?void 0:w.name),1),e.assignee?(l(),o("div",te,"→ "+m(e.assignee.name),1)):c("",!0)])])]}),_:2},1032,["href"]))),128)),u.bugs.data.length===0?(l(),o("div",se,[s[9]||(s[9]=t("p",{class:"text-sm text-gray-400"},"找不到問題",-1)),i(d(v),{href:a.route("bugs.create"),class:"mt-4 inline-block text-sm text-gray-900 hover:underline"},{default:p(()=>[...s[8]||(s[8]=[b(" 建立第一個問題 ",-1)])]),_:1},8,["href"])])):c("",!0)]),u.bugs.links.length>3?(l(),o("div",ae,[(l(!0),o(n,null,h(u.bugs.links,(e,x)=>(l(),o(n,{key:x},[e.url?(l(),V(d(v),{key:0,href:e.url,class:U(["px-3 py-1 text-sm",e.active?"text-gray-900":"text-gray-400 hover:text-gray-900"]),innerHTML:e.label},null,8,["href","class","innerHTML"])):(l(),o("span",{key:1,class:"px-3 py-1 text-sm text-gray-300",innerHTML:e.label},null,8,le))],64))),128))])):c("",!0)])]),_:1})],64))}};export{ue as default};
