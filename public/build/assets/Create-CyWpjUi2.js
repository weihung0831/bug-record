import{j as f,u as $,g as u,a as t,d as s,h as C,w as d,b as o,e as U,o as m,F as b,m as A,p as y,f as p,t as B,l as _}from"./app-Cshwuyje.js";import{_ as F}from"./AuthenticatedLayout-CPey1Cs-.js";import{_ as a,a as N,b as n}from"./TextInput-DRabSX-B.js";import{_ as O}from"./TextArea-Cc0FX0-M.js";import{_ as v}from"./Select-_BVE-MWZ.js";const S={class:"flex items-center gap-4"},q={class:"py-8"},L={class:"mt-1 border-b border-gray-200 focus-within:border-gray-900 transition-colors"},T={class:"mt-1 border-b border-gray-200 focus-within:border-gray-900 transition-colors"},j={class:"grid grid-cols-2 gap-6"},z={class:"mt-1"},D={class:"mt-1"},E={class:"mt-2 flex flex-wrap gap-2"},M=["onClick"],G={class:"flex items-center gap-4 pt-4"},H=["disabled"],X={__name:"Create",props:{priorities:Array,tags:Array,users:Array},setup(c){const g=c,x={critical:"緊急",high:"高",medium:"中",low:"低"},h=f(()=>g.priorities.map(i=>({value:i,label:x[i]||i}))),V=f(()=>[{value:"",label:"未指派"},...g.users.map(i=>({value:i.id,label:i.name}))]),e=$({title:"",description:"",priority:"medium",assignee_id:"",tags:[]}),w=()=>{e.post(route("bugs.store"))},k=i=>{const l=e.tags.indexOf(i);l===-1?e.tags.push(i):e.tags.splice(l,1)};return(i,l)=>(m(),u(b,null,[t(s(C),{title:"新增問題"}),t(F,null,{header:d(()=>[o("div",S,[t(s(_),{href:i.route("bugs.index"),class:"text-gray-400 hover:text-gray-900"},{default:d(()=>[...l[4]||(l[4]=[p(" ← ",-1)])]),_:1},8,["href"]),l[5]||(l[5]=o("h2",{class:"text-lg font-medium text-gray-900"},"新增問題",-1))])]),default:d(()=>[o("div",q,[o("form",{onSubmit:U(w,["prevent"]),class:"max-w-xl space-y-6"},[o("div",null,[t(a,{for:"title",value:"標題"}),o("div",L,[t(N,{id:"title",modelValue:s(e).title,"onUpdate:modelValue":l[0]||(l[0]=r=>s(e).title=r),type:"text",class:"block w-full",required:"",autofocus:""},null,8,["modelValue"])]),t(n,{message:s(e).errors.title,class:"mt-2"},null,8,["message"])]),o("div",null,[t(a,{for:"description",value:"描述"}),o("div",T,[t(O,{id:"description",modelValue:s(e).description,"onUpdate:modelValue":l[1]||(l[1]=r=>s(e).description=r),rows:6,required:""},null,8,["modelValue"])]),t(n,{message:s(e).errors.description,class:"mt-2"},null,8,["message"])]),o("div",j,[o("div",null,[t(a,{for:"priority",value:"優先級"}),o("div",z,[t(v,{modelValue:s(e).priority,"onUpdate:modelValue":l[2]||(l[2]=r=>s(e).priority=r),options:h.value,placeholder:"選擇優先級"},null,8,["modelValue","options"])]),t(n,{message:s(e).errors.priority,class:"mt-2"},null,8,["message"])]),o("div",null,[t(a,{for:"assignee",value:"負責人"}),o("div",D,[t(v,{modelValue:s(e).assignee_id,"onUpdate:modelValue":l[3]||(l[3]=r=>s(e).assignee_id=r),options:V.value,placeholder:"未指派"},null,8,["modelValue","options"])]),t(n,{message:s(e).errors.assignee_id,class:"mt-2"},null,8,["message"])])]),o("div",null,[t(a,{value:"標籤"}),o("div",E,[(m(!0),u(b,null,A(c.tags,r=>(m(),u("button",{key:r.id,type:"button",onClick:J=>k(r.id),class:"inline-flex items-center gap-1.5 rounded-full border-2 px-3 py-1 text-xs",style:y({borderColor:s(e).tags.includes(r.id)?r.color:"#e5e7eb",color:s(e).tags.includes(r.id)?r.color:"#4b5563"})},[o("span",{class:"h-2 w-2 rounded-full",style:y({backgroundColor:r.color})},null,4),p(" "+B(r.name),1)],12,M))),128))]),t(n,{message:s(e).errors.tags,class:"mt-2"},null,8,["message"])]),o("div",G,[o("button",{type:"submit",disabled:s(e).processing,class:"border border-gray-900 px-4 py-2 text-sm text-gray-900 hover:bg-gray-900 hover:text-white disabled:opacity-50"}," 建立 ",8,H),t(s(_),{href:i.route("bugs.index"),class:"text-sm text-gray-500 hover:text-gray-900"},{default:d(()=>[...l[6]||(l[6]=[p(" 取消 ",-1)])]),_:1},8,["href"])])],32)])]),_:1})],64))}};export{X as default};
